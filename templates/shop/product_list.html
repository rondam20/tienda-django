{% extends 'base.html' %}
{% block title %}Productos — Mi Tienda{% endblock %}
{% block content %}
<section class="hero" style="padding:28px 0 0;">
  <h1>Catálogo</h1>
  <p>Filtra por categoría:</p>
  <div class="chipbar">
    <a class="chip" href="/productos/" {% if not current_cat %}style="background:#0ea5e9;color:white;border:none"{% endif %}>Todas</a>
    {% for c in categories %}
      <a class="chip" href="/productos/?cat={{ c.slug }}" {% if current_cat == c.slug %}style="background:#0ea5e9;color:white;border:none"{% endif %}>{{ c.name }}</a>
    {% endfor %}
  </div>
</section>

<section style="margin-top:16px">
  <div class="grid grid-3">
    {% for p in products %}
      <article class="card">
        <a href="/producto/{{ p.slug }}/" class="card-media">
          {% if p.image %}<img src="{{ p.image.url }}" alt="{{ p.name }}">{% else %}
          <img src="https://picsum.photos/800/800?random={{ forloop.counter }}" alt="{{ p.name }}">{% endif %}
        </a>
        <div class="card-body">
          <a class="title" href="/producto/{{ p.slug }}/">{{ p.name }}</a>
          <div class="price">{{ p.price }} {{ p.currency }}</div>
        </div>
      </article>
    {% empty %}
      <p>No hay productos.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
